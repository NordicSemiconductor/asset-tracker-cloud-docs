

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Cell geolocations &mdash; nRF Asset Tracker v13.2.5 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/common.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Cloud connectivity and protocols for the Internet of Things" href="Cloud-connectivity-and-protocols-for-the-Internet-of-Things.html" />
    <link rel="prev" title="Automate building of HEX files for your nRF Connect SDK application" href="AutomateHEXFileBuilding.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> nRF Asset Tracker
          

          
          </a>

          
            
            
              <div class="version">
                saga
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project/Index.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/Index.html">AWS cloud components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/Index.html">Azure cloud components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/Index.html">Cat Tracker web application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firmware/Index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devices/Index.html">Connect using a real device</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Index.html">Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="FourKindsOfData.html">Four kinds of data</a></li>
<li class="toctree-l2"><a class="reference internal" href="AutomateHEXFileBuilding.html">Automate building of HEX files for your nRF Connect SDK application</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Cell geolocations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Cloud-connectivity-and-protocols-for-the-Internet-of-Things.html">Cloud connectivity and protocols for the Internet of Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="CloudDifferences.html">Cloud differences</a></li>
<li class="toctree-l2"><a class="reference internal" href="ETSI-EN-303-645.html">Cyber security for consumer Internet of Things: baseline requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="Versioning.html">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="Direnv.html">direnv</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/search?q=org%3ANordicSemiconductor+nrf-asset-tracker&amp;type=repositories">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adr/README.html">Architecture Decision Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CODE_OF_CONDUCT.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING.html">Contributing to the project</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Asset Tracker</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Index.html">Guides</a> &raquo;</li>
        
      <li>Cell geolocations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/NordicSemiconductor/asset-tracker-cloud-docs/blob/saga/docs/guides/CellGeolocations.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cell-geolocations">
<h1>Cell geolocations<a class="headerlink" href="#cell-geolocations" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#assisted-gps-agps" id="id1">Assisted GPS (AGPS)</a></p></li>
<li><p><a class="reference internal" href="#geolocating-cells" id="id2">Geolocating cells</a></p>
<ul>
<li><p><a class="reference internal" href="#geolocating-cells-using-other-devices" id="id3">Geolocating cells using other devices</a></p></li>
<li><p><a class="reference internal" href="#geolocating-cells-using-third-party-apis" id="id4">Geolocating cells using third-party APIs</a></p></li>
</ul>
</li>
</ul>
</div>
<p>Locating a device is an important aspect of any IoT solution.
It is one of the primary functions in the case of an asset tracker (like the Cat Tracker).
But sometimes, acquiring a GPS fix is not possible, for example, when the device is indoors.
In such a situation, other data can be used to approximately calculate the location of the device.
If the device has a cellular connection, the ID of the cells with which the device modem communicates can be used to calculate its location.
Smartphones use this technique and combine the data from other wireless networks to quickly estimate a location down to a few meters.
The approximate location of the device is then used by the GPS module to speed up the time to the first GPS fix since it can limit the number of GPS satellites that must be queried to the ones that are currently visible in the sky.</p>
<p>However, smartphones are many times more powerful and there is a concrete need to have the location information <em>on the device</em> instantly (for example, for showing the location of the user in a navigation application while the device is indoors).
Smartphones have location-dependent features, while most of the IoT devices will not have such features.
For example, the Cat Tracker has no feature that depends on a location, it will only <em>report</em> the location to the cloud backend.
In this case, only the mobile app that visualizes the location of the Cat Tracker requires the location of the device.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since it is much more efficient to resolve cell geolocations on the cloud, this can be ideally the responsibility of the cloud backend.</p>
</div>
<div class="section" id="assisted-gps-agps">
<h2><a class="toc-backref" href="#id1">Assisted GPS (AGPS)</a><a class="headerlink" href="#assisted-gps-agps" title="Permalink to this headline">¶</a></h2>
<p>The only <em>location-dependent</em> feature on the Cat Tracker is AGPS, which tremendously speeds up the time to acquire the first GPS fix (seconds instead of minutes).
Complex location triangulation based on mobile network cells or Wi-Fi MAC Addresses is not required.
It is sufficient to have an up-to-date <a class="reference external" href="https://en.wikipedia.org/wiki/GPS_signals#Almanac">GPS almanac</a> and an approximate location, which can be derived from the mobile network operator’s country code.
This data is sufficient for the GPS module for calculating a quick GPS fix.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://github.com/NordicSemiconductor/asset-tracker-cloud-docs/discussions/9">AGPS is currently not implemented in the Asset Tracker v2</a>.</p>
</div>
</div>
<div class="section" id="geolocating-cells">
<h2><a class="toc-backref" href="#id2">Geolocating cells</a><a class="headerlink" href="#geolocating-cells" title="Permalink to this headline">¶</a></h2>
<p>As mentioned above, on the UI, the user may require to know the <em>location</em> of the device instantly.
Depending on the tracked subject, an accuracy of a few hundred meters may be enough.
Thus, an approximate location can be sufficient.
An approximate position is always better than the absence of the location information (if the device is unable to acquire a GPS fix).
Therefore, it is beneficial to geolocate the current mobile network cell.</p>
<div class="section" id="geolocating-cells-using-other-devices">
<h3><a class="toc-backref" href="#id3">Geolocating cells using other devices</a><a class="headerlink" href="#geolocating-cells-using-other-devices" title="Permalink to this headline">¶</a></h3>
<p>Resolving the cell location on the cloud backend has unique advantages over resolving it on the device.
It removes the limitations caused by the firmware image size and the memory usage on the device and it can attend to other devices after GPS fixes.
If many devices are closely located, it saves a lot of resources since a cell’s geolocation needs to be resolved only once and then it can be made available to all the devices.
This must be the preferred approach when developing an IoT product that has location-specific features and relies on the approximate location of cell towers to operate.
If a device knows its cell tower, it is normally safe to assume that it has an internet connection to request the approximate location from the cloud.
This allows to offload expensive calculations to the cloud and reduce the resource usage on the device.</p>
<p>In the nRF Asset Tracker, whenever a device reports a GPS fix, the position is stored together with the cell ID.
Over time, an up-to-date cell location database that is independent from a third-party API is built.
This database is used as the primary means of geolocating cells in the nRF Asset Tracker.
The third-party API will be called (<em>if it is enabled</em>) only if a cell has not been geolocated by a device previously.</p>
</div>
<div class="section" id="geolocating-cells-using-third-party-apis">
<h3><a class="toc-backref" href="#id4">Geolocating cells using third-party APIs</a><a class="headerlink" href="#geolocating-cells-using-third-party-apis" title="Permalink to this headline">¶</a></h3>
<p>Third-party APIs and services like <a class="reference external" href="https://unwiredlabs.com/">UnwiredLabs</a> and <a class="reference external" href="https://www.cellmapper.net/">CellMapper</a> have a database of cell tower locations and provide an API to query against these locations.</p>
<p>The nRF Asset Tracker implements the optional resolution on the cloud side using <a class="reference internal" href="../aws/UnwiredLabsAPI.html#aws-unwired-labs-api"><span class="std std-ref">UnwiredLabs on AWS</span></a> and <a class="reference internal" href="../azure/UnwiredLabsAPI.html#azure-unwired-labs-api"><span class="std std-ref">UnwiredLabs on Azure</span></a> for the cells that have not been geolocated by the devices.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Cloud-connectivity-and-protocols-for-the-Internet-of-Things.html" class="btn btn-neutral float-right" title="Cloud connectivity and protocols for the Internet of Things" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="AutomateHEXFileBuilding.html" class="btn btn-neutral float-left" title="Automate building of HEX files for your nRF Connect SDK application" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019-2021, Nordic Semiconductor ASA | nordicsemi.no.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>