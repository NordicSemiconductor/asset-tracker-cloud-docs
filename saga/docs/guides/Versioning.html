

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Versioning &mdash; nRF Asset Tracker fa71603fc7b52a7f7e26869ae6bbc54f943144a4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/common.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Managing environment variables using direnv" href="Direnv.html" />
    <link rel="prev" title="Cyber security for consumer Internet of Things" href="ETSI-EN-303-645.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> nRF Asset Tracker
          

          
          </a>

          
            
            
              <div class="version">
                saga
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project/Index.html">Project overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/Index.html">AWS cloud components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/Index.html">Azure cloud components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/Index.html">nRF Asset Tracker web application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firmware/Index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devices/Index.html">Connect using a real device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud-protocol/Index.html">Device-to-cloud communication</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Index.html">Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="FourKindsOfData.html">Four kinds of data</a></li>
<li class="toctree-l2"><a class="reference internal" href="AutomateHEXFileBuilding.html">Automate building of HEX files for your nRF Connect SDK application</a></li>
<li class="toctree-l2"><a class="reference internal" href="CellGeolocations.html">Cell geolocations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Cloud-connectivity-and-protocols-for-the-Internet-of-Things.html">Cloud connectivity and protocols for the Internet of Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="CloudDifferences.html">Cloud differences</a></li>
<li class="toctree-l2"><a class="reference internal" href="ETSI-EN-303-645.html">Cyber security for consumer Internet of Things</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="Direnv.html">Managing environment variables using direnv</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/search?q=org%3ANordicSemiconductor+nrf-asset-tracker&amp;type=repositories">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING.html">Contributing to the project</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Asset Tracker</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="Index.html">Guides</a> &raquo;</li>
        
      <li>Versioning</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/NordicSemiconductor/asset-tracker-cloud-docs/blob/saga/docs/guides/Versioning.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="versioning">
<span id="id1"></span><h1>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#releasing-a-new-version-of-a-package" id="id2">Releasing a new version of a package</a><ul>
<li><a class="reference internal" href="#patch-release-fix" id="id3">Patch release (fix)</a></li>
<li><a class="reference internal" href="#feature-release-feat" id="id4">Feature release (feat)</a></li>
<li><a class="reference internal" href="#breaking-release-breaking-change" id="id5">Breaking Release (BREAKING CHANGE:)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#typical-changes" id="id6">Typical changes</a><ul>
<li><a class="reference internal" href="#updating-the-dependencies" id="id7">Updating the dependencies</a></li>
<li><a class="reference internal" href="#refactoring" id="id8">Refactoring</a></li>
</ul>
</li>
<li><a class="reference internal" href="#publishing-the-releases" id="id9">Publishing the releases</a></li>
</ul>
</div>
<p>The <a class="reference external" href="https://github.com/semantic-release/semantic-release">semantic-release</a> tool is used to automatically determine the next version of the project and publish a release in the GitHub project as well as release it to the <code class="docutils literal notranslate"><span class="pre">&#64;NordicSemiconductor</span></code> npm organization.</p>
<p>The next version is determined by scanning the commit messages.
The commit messages must follow the <a class="reference external" href="https://github.com/semantic-release/semantic-release#commit-message-format">Angular commit message rules</a>, and in every library <a class="reference external" href="https://github.com/marionebl/commitlint">a hook</a> will check the commit messages against these rules.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="file docutils literal notranslate"><span class="pre">package.json</span></code> file of a project must contain only <code class="docutils literal notranslate"><span class="pre">0.0.0-development</span></code> as the <code class="docutils literal notranslate"><span class="pre">version</span></code> property.
Semantic-release will ignore the value.
Only the published package on npm will contain the correct version number.</p>
</div>
<div class="section" id="releasing-a-new-version-of-a-package">
<span id="guides-versionining-how-to-release-a-new-version-of-a-package"></span><h2><a class="toc-backref" href="#id2">Releasing a new version of a package</a><a class="headerlink" href="#releasing-a-new-version-of-a-package" title="Permalink to this headline">¶</a></h2>
<p>Consider an example of a library, which has npm version <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code>.</p>
<p>A new version will be published by the respective project’s CI run.
Use commit messages that follow the <a class="reference external" href="https://github.com/semantic-release/semantic-release#commit-message-format">schema for a commit message</a>.</p>
<p>Examples of commit messages that trigger a release:</p>
<ul>
<li><p class="first">Patch release</p>
<pre class="highlight literal-block">
 fix: <em>commit message</em>
</pre>
</li>
<li><p class="first">Feature release</p>
<pre class="highlight literal-block">
feat: <em>commit message</em>
</pre>
</li>
<li><p class="first">Breaking release</p>
<pre class="highlight literal-block">
<em>scope</em>: <em>commit message</em>

BREAKING CHANGE:

<em>description of breaking change</em>
</pre>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A commit message with different format will not trigger a release.</p>
</div>
<div class="section" id="patch-release-fix">
<h3><a class="toc-backref" href="#id3">Patch release (fix)</a><a class="headerlink" href="#patch-release-fix" title="Permalink to this headline">¶</a></h3>
<p>A fix is a change to the implementation, which removes a bug without changing the public API (method names and signatures, exports) of the library.
The consumer of the library does not need to change their implementation when installing the fixed version.</p>
<p>To release a fix (that updates the version from <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code> to <code class="docutils literal notranslate"><span class="pre">2.3.5</span></code>), use the type <code class="docutils literal notranslate"><span class="pre">fix</span></code> in the commit message:</p>
<pre class="highlight literal-block">
 fix: <em>commit message</em>
</pre>
<p>You can optionally add a scope, which is a lowercase string that is used to identify the affected component.</p>
<pre class="highlight literal-block">
 fix(<em>scope</em>): <em>commit message</em>
</pre>
<p>Scopes are useful when working with a large project.</p>
</div>
<div class="section" id="feature-release-feat">
<h3><a class="toc-backref" href="#id4">Feature release (feat)</a><a class="headerlink" href="#feature-release-feat" title="Permalink to this headline">¶</a></h3>
<p>A feature is a change to the implementation of a library which adds additional functionality without changing the public API of the library.</p>
<p>You may add new exports, methods and extra method arguments that are optional, but the consumer of the library does not need to change their implementation when installing the library with the new feature.</p>
<p>To release a feature (that updates the version from <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code> to <code class="docutils literal notranslate"><span class="pre">2.4.0</span></code>), use the type <code class="docutils literal notranslate"><span class="pre">feat</span></code> in the commit message:</p>
<pre class="highlight literal-block">
 feat: <em>commit message</em>
</pre>
<p>You can optionally add a scope as well.</p>
</div>
<div class="section" id="breaking-release-breaking-change">
<h3><a class="toc-backref" href="#id5">Breaking Release (BREAKING CHANGE:)</a><a class="headerlink" href="#breaking-release-breaking-change" title="Permalink to this headline">¶</a></h3>
<p>Whenever the public API of the library changes in a way that requires the consumer to update their implementation, you must mark the change as breaking.
This can happen in the following conditions:</p>
<ul class="simple">
<li>Method names and arguments are renamed.</li>
<li>Previously optional arguments become mandatory.</li>
<li>Arguments are removed.</li>
<li>Classes are renamed.</li>
</ul>
<p>Even if the change is very small, as soon as you break the library’s contract (its public API), it is a breaking change according to <a class="reference external" href="https://semver.org/#spec-item-8">Semantic Versioning 2.0.0</a>.</p>
<p>To do a breaking release (that updates the version from <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code> to <code class="docutils literal notranslate"><span class="pre">3.0.0</span></code>), use the text <code class="code docutils literal notranslate"><span class="pre">BREAKING</span> <span class="pre">CHANGE:</span></code> (followed by a space of two new lines) in the commit message:</p>
<pre class="highlight literal-block">
 refactor: <em>commit message</em>

 BREAKING CHANGE:

 <em>description of breaking change</em>
</pre>
<p>You can optionally add a scope as well.</p>
<p>In the case of a breaking release, the message type (<code class="docutils literal notranslate"><span class="pre">refactor</span></code> in the example) can be any valid type.</p>
</div>
</div>
<div class="section" id="typical-changes">
<h2><a class="toc-backref" href="#id6">Typical changes</a><a class="headerlink" href="#typical-changes" title="Permalink to this headline">¶</a></h2>
<p>Some of the typical changes that you make on the repository are updating the dependencies or refactoring.</p>
<div class="section" id="updating-the-dependencies">
<h3><a class="toc-backref" href="#id7">Updating the dependencies</a><a class="headerlink" href="#updating-the-dependencies" title="Permalink to this headline">¶</a></h3>
<p>If you are manually updating the dependencies in a library, you must commit the change as a fix, so that the consumers also use the updated dependencies.</p>
</div>
<div class="section" id="refactoring">
<h3><a class="toc-backref" href="#id8">Refactoring</a><a class="headerlink" href="#refactoring" title="Permalink to this headline">¶</a></h3>
<p>If you perform a pure refactoring of a library without changing the features and the public API and if you require the refactored version in your consumers, commit the refactoring as a feature.
In this case, you are improving the library, which qualifies as a feature.
For example, a performance improvement can be a feature.</p>
</div>
</div>
<div class="section" id="publishing-the-releases">
<h2><a class="toc-backref" href="#id9">Publishing the releases</a><a class="headerlink" href="#publishing-the-releases" title="Permalink to this headline">¶</a></h2>
<p>After you have pushed your changes to the remote repository, a job will be run on the CI runner.
If the job completes successfully (for example, all the tests pass and the linter does not report any errors), <code class="docutils literal notranslate"><span class="pre">semantic-release</span></code> will determine the next version to be released.</p>
<p>The highest commit takes precedence (<code class="docutils literal notranslate"><span class="pre">fix</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">feat</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">breaking</span> <span class="pre">change</span></code>).
This means that if the list of commit messages since the last release contains only fixes, the patch version will be incremented (<code class="code docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.3.5</span></code>).
If the list of commits contains at least one new feature, then the minor version will be incremented and the patch version will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code> (<code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.4.0</span></code>).
If the list of commits contains at least one breaking change, then the major version will be incremented, and the minor and patch versions will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code> (<code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">3.0.0</span></code>).</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Direnv.html" class="btn btn-neutral float-right" title="Managing environment variables using direnv" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ETSI-EN-303-645.html" class="btn btn-neutral float-left" title="Cyber security for consumer Internet of Things" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-2022, Nordic Semiconductor ASA | nordicsemi.no

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>